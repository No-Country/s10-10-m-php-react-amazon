{
  "version": 3,
  "sources": ["../../wouter/react-deps.js", "../../wouter/use-sync-external-store.js", "../../wouter/use-location.js"],
  "sourcesContent": ["import * as React from \"react\";\n\n// React.useInsertionEffect is not available in React <18\nconst {\n  useEffect,\n  useLayoutEffect,\n  useRef,\n  useInsertionEffect: useBuiltinInsertionEffect,\n} = React;\n\nexport {\n  useState,\n  useContext,\n  createContext,\n  isValidElement,\n  cloneElement,\n  createElement,\n  Fragment,\n  forwardRef,\n} from \"react\";\n\n// To resolve webpack 5 errors, while not presenting problems for native,\n// we copy the approaches from https://github.com/TanStack/query/pull/3561\n// and https://github.com/TanStack/query/pull/3601\n// ~ Show this aging PR some love to remove the need for this hack:\n//   https://github.com/facebook/react/pull/25231 ~\nexport { useSyncExternalStore } from \"./use-sync-external-store.js\";\n\n// Copied from:\n// https://github.com/facebook/react/blob/main/packages/shared/ExecutionEnvironment.js\nconst canUseDOM = !!(\n  typeof window !== \"undefined\" &&\n  typeof window.document !== \"undefined\" &&\n  typeof window.document.createElement !== \"undefined\"\n);\n\n// Copied from:\n// https://github.com/reduxjs/react-redux/blob/master/src/utils/useIsomorphicLayoutEffect.ts\n// \"React currently throws a warning when using useLayoutEffect on the server.\n// To get around it, we can conditionally useEffect on the server (no-op) and\n// useLayoutEffect in the browser.\"\nexport const useIsomorphicLayoutEffect = canUseDOM\n  ? useLayoutEffect\n  : useEffect;\n\n// useInsertionEffect is already a noop on the server.\n// See: https://github.com/facebook/react/blob/main/packages/react-server/src/ReactFizzHooks.js\nexport const useInsertionEffect =\n  useBuiltinInsertionEffect || useIsomorphicLayoutEffect;\n\n// Userland polyfill while we wait for the forthcoming\n// https://github.com/reactjs/rfcs/blob/useevent/text/0000-useevent.md\n// Note: \"A high-fidelity polyfill for useEvent is not possible because\n// there is no lifecycle or Hook in React that we can use to switch\n// .current at the right timing.\"\n// So we will have to make do with this \"close enough\" approach for now.\nexport const useEvent = (fn) => {\n  const ref = useRef([fn, (...args) => ref[0](...args)]).current;\n  // Per Dan Abramov: useInsertionEffect executes marginally closer to the\n  // correct timing for ref synchronization than useLayoutEffect on React 18.\n  // See: https://github.com/facebook/react/pull/25881#issuecomment-1356244360\n  useInsertionEffect(() => {\n    ref[0] = fn;\n  });\n  return ref[1];\n};\n", "export { useSyncExternalStore } from \"use-sync-external-store/shim/index.js\";\n", "import { useSyncExternalStore, useEvent } from \"./react-deps.js\";\n\n/*\n * Transforms `path` into its relative `base` version\n * If base isn't part of the path provided returns absolute path e.g. `~/app`\n */\nconst relativePath = (base = \"\", path = location.pathname) =>\n  !path.toLowerCase().indexOf(base.toLowerCase())\n    ? path.slice(base.length) || \"/\"\n    : \"~\" + path;\n\nconst absolutePath = (to, base = \"\") =>\n  to[0] === \"~\" ? to.slice(1) : base + to;\n\n/**\n * History API docs @see https://developer.mozilla.org/en-US/docs/Web/API/History\n */\nconst eventPopstate = \"popstate\";\nconst eventPushState = \"pushState\";\nconst eventReplaceState = \"replaceState\";\nconst eventHashchange = \"hashchange\";\nexport const events = [\n  eventPopstate,\n  eventPushState,\n  eventReplaceState,\n  eventHashchange,\n];\n\nconst subscribeToLocationUpdates = (callback) => {\n  for (const event of events) {\n    addEventListener(event, callback);\n  }\n  return () => {\n    for (const event of events) {\n      removeEventListener(event, callback);\n    }\n  };\n};\n\nexport const useLocationProperty = (fn, ssrFn) =>\n  useSyncExternalStore(subscribeToLocationUpdates, fn, ssrFn);\n\nconst currentSearch = () => location.search;\nexport const useSearch = () => useLocationProperty(currentSearch);\n\nconst currentPathname = () => location.pathname;\n\nexport const usePathname = ({ ssrPath } = {}) =>\n  useLocationProperty(\n    currentPathname,\n    ssrPath ? () => ssrPath : currentPathname\n  );\n\nexport const navigate = (to, { replace = false } = {}) =>\n  history[replace ? eventReplaceState : eventPushState](null, \"\", to);\n\n// the 2nd argument of the `useLocation` return value is a function\n// that allows to perform a navigation.\n//\n// the function reference should stay the same between re-renders, so that\n// it can be passed down as an element prop without any performance concerns.\n// (This is achieved via `useEvent`.)\nconst useLocation = (opts = {}) => [\n  relativePath(opts.base, usePathname(opts)),\n  useEvent((to, navOpts) => navigate(absolutePath(to, opts.base), navOpts)),\n];\n\nexport default useLocation;\n\n// While History API does have `popstate` event, the only\n// proper way to listen to changes via `push/replaceState`\n// is to monkey-patch these methods.\n//\n// See https://stackoverflow.com/a/4585031\nif (typeof history !== \"undefined\") {\n  for (const type of [eventPushState, eventReplaceState]) {\n    const original = history[type];\n    // TODO: we should be using unstable_batchedUpdates to avoid multiple re-renders,\n    // however that will require an additional peer dependency on react-dom.\n    // See: https://github.com/reactwg/react-18/discussions/86#discussioncomment-1567149\n    history[type] = function () {\n      const result = original.apply(this, arguments);\n      const event = new Event(type);\n      event.arguments = arguments;\n\n      dispatchEvent(event);\n      return result;\n    };\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;AAAA,YAAuB;AAUvB,mBASO;;;ACnBP,kBAAqC;;;ADGrC,IAAM;AAAA,EACJ;AAAA,EACA;AAAA,EACA;AAAA,EACA,oBAAoB;AACtB,IAAI;AAsBJ,IAAM,YAAY,CAAC,EACjB,OAAO,WAAW,eAClB,OAAO,OAAO,aAAa,eAC3B,OAAO,OAAO,SAAS,kBAAkB;AAQpC,IAAM,4BAA4B,YACrC,kBACA;AAIG,IAAM,qBACX,6BAA6B;AAQxB,IAAM,WAAW,CAAC,OAAO;AAC9B,QAAM,MAAM,OAAO,CAAC,IAAI,IAAI,SAAS,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,CAAC,EAAE;AAIvD,qBAAmB,MAAM;AACvB,QAAI,CAAC,IAAI;AAAA,EACX,CAAC;AACD,SAAO,IAAI,CAAC;AACd;;;AE3DA,IAAM,eAAe,CAAC,OAAO,IAAI,OAAO,SAAS,aAC/C,CAAC,KAAK,YAAY,EAAE,QAAQ,KAAK,YAAY,CAAC,IAC1C,KAAK,MAAM,KAAK,MAAM,KAAK,MAC3B,MAAM;AAEZ,IAAM,eAAe,CAAC,IAAI,OAAO,OAC/B,GAAG,CAAC,MAAM,MAAM,GAAG,MAAM,CAAC,IAAI,OAAO;AAKvC,IAAM,gBAAgB;AACtB,IAAM,iBAAiB;AACvB,IAAM,oBAAoB;AAC1B,IAAM,kBAAkB;AACjB,IAAM,SAAS;AAAA,EACpB;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;AAEA,IAAM,6BAA6B,CAAC,aAAa;AAC/C,aAAW,SAAS,QAAQ;AAC1B,qBAAiB,OAAO,QAAQ;AAAA,EAClC;AACA,SAAO,MAAM;AACX,eAAW,SAAS,QAAQ;AAC1B,0BAAoB,OAAO,QAAQ;AAAA,IACrC;AAAA,EACF;AACF;AAEO,IAAM,sBAAsB,CAAC,IAAI,cACtC,kCAAqB,4BAA4B,IAAI,KAAK;AAE5D,IAAM,gBAAgB,MAAM,SAAS;AAC9B,IAAM,YAAY,MAAM,oBAAoB,aAAa;AAEhE,IAAM,kBAAkB,MAAM,SAAS;AAEhC,IAAM,cAAc,CAAC,EAAE,QAAQ,IAAI,CAAC,MACzC;AAAA,EACE;AAAA,EACA,UAAU,MAAM,UAAU;AAC5B;AAEK,IAAM,WAAW,CAAC,IAAI,EAAE,UAAU,MAAM,IAAI,CAAC,MAClD,QAAQ,UAAU,oBAAoB,cAAc,EAAE,MAAM,IAAI,EAAE;AAQpE,IAAM,cAAc,CAAC,OAAO,CAAC,MAAM;AAAA,EACjC,aAAa,KAAK,MAAM,YAAY,IAAI,CAAC;AAAA,EACzC,SAAS,CAAC,IAAI,YAAY,SAAS,aAAa,IAAI,KAAK,IAAI,GAAG,OAAO,CAAC;AAC1E;AAEA,IAAO,uBAAQ;AAOf,IAAI,OAAO,YAAY,aAAa;AAClC,aAAW,QAAQ,CAAC,gBAAgB,iBAAiB,GAAG;AACtD,UAAM,WAAW,QAAQ,IAAI;AAI7B,YAAQ,IAAI,IAAI,WAAY;AAC1B,YAAM,SAAS,SAAS,MAAM,MAAM,SAAS;AAC7C,YAAM,QAAQ,IAAI,MAAM,IAAI;AAC5B,YAAM,YAAY;AAElB,oBAAc,KAAK;AACnB,aAAO;AAAA,IACT;AAAA,EACF;AACF;",
  "names": []
}
